<h3 class="text-center">User List</h3>

<div class="card shadow-sm p-3 mb-4">
  <div class="card-body">
    <h5 class="card-title">Add New Employee</h5>
    <div class="row g-2">
      <!-- Removed ID input field since it will be auto-generated -->
      <div class="col-md-3">
        <input type="text" [(ngModel)]="newUser.name" class="form-control" placeholder="Name" required />
      </div>
      <div class="col-md-3">
        <input type="text" [(ngModel)]="newUser.username" class="form-control" placeholder="Username" required />
      </div>
      <div class="col-md-3">
        <input type="email" [(ngModel)]="newUser.email" class="form-control" placeholder="Email" required />
      </div>
      <div class="col-md-3">
        <input type="tel" [(ngModel)]="newUser.phone" class="form-control" placeholder="Phone" />
      </div>
    </div>
    <div class="d-flex justify-content-between mt-3">
      <button class="btn btn-success" (click)="addUser()">Add Employee</button>
      <button class="btn btn-primary" *ngIf="editingUser" (click)="updateUser()">Update Employee</button>
      <button class="btn btn-secondary" *ngIf="editingUser" (click)="cancelEdit()">Cancel</button>
    </div>
  </div>
</div>

<div class="container" *ngIf="loading">
  <div class="text-center">
    <div class="spinner-border" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>
</div>

<div class="container" *ngIf="!loading">
  <div class="row">
    <table class="table table-hover align-middle">
      <thead class="table-dark">
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Username</th>
          <th>Email</th>
          <th>Phone</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let employee of users">
          <td>{{ employee.id }}</td>
          <td>{{ employee.name }}</td>
          <td>{{ employee.username }}</td>
          <td>{{ employee.email }}</td>
          <td>{{ employee.phone }}</td>
          <td>
            <button class="btn btn-outline-primary btn-sm me-2" (click)="editUser(employee)">
              Edit
            </button>
            <button class="btn btn-outline-danger btn-sm" (click)="deleteUser(employee.id)">
              Delete
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>